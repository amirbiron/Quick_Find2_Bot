# 🤖 בוט מדריכים חכם לטלגרם

בוט אוטומטי לניהול מדריכים בערוץ טלגרם עם ערכת התחלה חכמה ושמירת פוסטים אוטומטית.

## ✨ מה הבוט עושה?

- **ערכת התחלה אוטומטית** - שליחה למשתמשים שכותבים `/start`
- **זיהוי פוסטים חכם** - שמירת פוסטים רלוונטיים אוטומטית (ללא צורך בתגיות)
- **רשימת מדריכים דינמית** - הצגת כל המדריכים בפקודה `/מדריכים`
- **פילטור חכם** - התעלמות מפוסטים קצרים, סקרים, ופורוורדים

## 🎯 פילטרי השמירה

הבוט שומר פוסטים שמתאימים לקריטריונים הבאים:

✅ **ישמור:**
- פוסטים מ-50 תווים ומעלה
- תוכן מועיל ומשמעותי
- כל סוגי התוכן (טקסט, תמונות עם כיתוב, וכו')

❌ **לא ישמור:**
- פוסטים עם `#skip` (לדילוג ידני)
- פוסטים קצרים (פחות מ-50 תווים)
- סקרים (polls)
- פורוורדים גרידא מערוצים אחרים

## 🚀 התקנה על Render (חינם)

### שלב 1: יצירת בוט
1. פתח צ'אט עם [@BotFather](https://t.me/BotFather) בטלגרם
2. כתב `/newbot` ותן שם לבוט
3. שמור את הטוקן שתקבל (נדרש לשלב 4)

### שלב 2: הגדרת הבוט כמנהל בערוץ
1. היכנס לערוץ שלך בטלגרם
2. הגדרות ערוץ → מנהלים → הוסף מנהל
3. הוסף את הבוט עם הרשאות:
   - ✅ מחיקת הודעות
   - ✅ הוספת משתמשים
   - ✅ קריאת הודעות

### שלב 3: העלאה ל-Render
1. צור חשבון ב-[Render](https://render.com)
2. צור repository חדש ב-GitHub עם כל הקבצים
3. ב-Render: **New** → **Web Service**
4. חבר את ה-repository שלך

### שלב 4: הגדרת משתני סביבה ב-Render
בלשונית **Environment**:
```
BOT_TOKEN=YOUR_BOT_TOKEN_HERE
WEBHOOK_URL=https://your-app-name.onrender.com
PORT=8000
```

### שלב 5: עדכון קובץ ההגדרות
בקובץ `render.yaml`, עדכן:
```yaml
- key: WEBHOOK_URL
  value: https://your-actual-app-name.onrender.com
```

### שלב 6: פרסום!
הבוט יהיה זמין תוך כמה דקות על:
`https://your-app-name.onrender.com`

## 📱 פקודות הבוט

| פקודה | תיאור |
|--------|--------|
| `/start` | ערכת התחלה עם כפתורים |
| `/מדריכים` | רשימת כל המדריכים |
| `/guides` | רשימת המדריכים (באנגלית) |

## 🎛️ התאמה אישית

### שינוי הגדרות פילטור
בקובץ `main.py`, פונקציה `should_save_post()`:

```python
def should_save_post(message) -> bool:
    # שנה את הסף המינימלי לתווים
    if len(text.strip()) < 30:  # במקום 50
        return False
    
    # הוסף פילטרים נוספים
    if "מודעה" in text.lower():
        return False
```

### עדכון ערכת ההתחלה
בקובץ `main.py`, עדכן את `START_BUTTONS`:

```python
START_BUTTONS = [
    [InlineKeyboardButton("הכפתור שלך", url="הקישור שלך")],
    [InlineKeyboardButton("📚 כל המדריכים", callback_data="show_guides")]
]
```

### שינוי שם הערוץ
בקובץ `main.py`:
```python
CHANNEL_USERNAME = '@YourChannelName'
```

## 📊 מסד נתונים

הבוט משתמש ב-SQLite עם הטבלה הבאה:

```sql
CREATE TABLE guides (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    message_id INTEGER UNIQUE NOT NULL,
    title TEXT NOT NULL,
    date_created TIMESTAMP NOT NULL,
    date_saved TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## 🛠️ פיתוח מקומי

```bash
# יצירת סביבה וירטואלית
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# התקנת תלויות
pip install -r requirements.txt

# הגדרת משתנה סביבה
export BOT_TOKEN=your_token_here

# הרצה
python main.py
```

## 🔧 פתרון בעיות נפוצות

### הבוט לא מגיב ל-/start
- ודא שהטוקן נכון במשתני הסביבה
- בדק שהבוט פועל (ב-Render Logs)

### הבוט לא שומר פוסטים
- ודא שהבוט מנהל בערוץ עם הרשאות קריאה
- בדק שהערוץ ציבורי (@channel_name)
- ודא ששם הערוץ נכון בקוד

### שגיאת webhook
- ודא ש-WEBHOOK_URL נכון
- נסה לעדכן את הבוט עם פקודה חדשה

## 📝 לוגים וניטור

**צפייה בלוגים ב-Render:**
1. היכנס ל-Dashboard
2. בחר את השירות שלך
3. לחץ על **Logs**

**לוגים חשובים לחיפוש:**
- `נשמר מדריך חדש` - פוסט נשמר בהצלחה
- `מתעלם מפוסט` - פוסט לא עמד בקריטריונים
- `מסד הנתונים אותחל` - הבוט התחיל בהצלחה

## 🤝 תמיכה

נתקלת בבעיה? צור issue ב-GitHub או פנה אלי ישירות.

## 📄 רישיון

MIT License - ראה קובץ LICENSE לפרטים.

---

**נוצר בעזרת Claude 💡**
